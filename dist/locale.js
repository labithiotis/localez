"use strict";!function(){function e(e,t){var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.onload=t,o.src=e,n.appendChild(o)}function t(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e){this.options=t({version:"0.0.1",lang:null,debug:!1,debugConsoleStyle:{warn:"background: #222; color: #bada55",error:"background: #990f0f; color: #ffc7c7"},hasLocale:!1,dir:"locales/",invoker:"__",openTag:"{{",closeTag:"}}",matchers:{type:/^(\\s+)?\w+/i,variable:/^(\\s+)?[\w\.]+/i},markers:{gender:["gender","g"],integer:["integer","i"],number:["number","n"]},numberEnum:{zero:"zero",one:"one",two:"two",few:"few",many:"many",other:"other"},numbers:function(e,t){var n=e%10;return 1===~~(e%100/10)?t.many:1===n?t.one:2===n?t.two:3===n?t.few:t.other},numberToString:function(e){if(0===e)return"zero";var t=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],n=["","","twenty","thirty","fourty","fifty","sixty","seventy","eighty","ninety"],o=["","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion"],r=function(e){return("000"+e).substr(-3)},i=function(e){return e.substr(0,e.length-3)},s=function(e){var o=e[0],r=e[1],i=e[2];return[0===Number(o)?"":t[o]+" hundred ",0===Number(i)?n[r]:n[r]&&n[r]+"-"||"",t[r+i]||t[i]].join("")},a=function(e){return function(t){return function(n){return t?[t,n&&" "+n||""," ",e].join(""):e}}},p=function l(e){return function(t){return function(n){return function(p){return"000"===n&&0===p.length?e:l(a(e)(s(n))(o[t]))(t+1)(r(p))(i(p))}}}};return(0>e?"minus ":"")+p("")(0)(r(String(e)))(i(String(e)))}},e),this.locale=null;try{this.options.lang=navigator.language.match(/^([^-]*)/)[0]}catch(n){console.warn("Unable to determine device language.")}return this.loadLocale(this.options.dir+this.options.lang+".js",this.localeLoaded.bind(this)),this}var o,r=function(){return this||(0,eval)("this")}();if(String.prototype.hashCode=function(){var e,t,n,o=0;if(0==this.length)return o;for(e=0,n=this.length;n>e;e++)t=this.charCodeAt(e),o=(o<<5)-o+t,o|=0;return o},Object.prototype.getDescendant=function(e){if("string"==typeof e){for(var t=this,n=e.split(".");n.length&&(t=t[n.shift()]););return t}},n.prototype.__=function(e,t){return"string"!=typeof e?this:t&&"object"!=typeof t?console.error("Second argmument should to be a {object}"):this.parse.apply(this,[e,t||{}])},n.prototype.log=function(){return this.options.debug&&console.log.apply(console,arguments)},n.prototype.parseError=function(){return console.error.apply(console,arguments),""},n.prototype.localeLoaded=function(){this.locale=window.locale,t(this.options,window.locale.config||{})},n.prototype.getLocaleString=function(e){return this.log("Get transaltion string from locale resource"),this.locale?this.locale[String(e).hashCode()]||e:e},n.prototype.parse=function(e,t){return this.parseString(this.getLocaleString(e),null,t)},n.prototype.parseString=function(e,t,n){t=t||"",this.log("Parse string for next expression");var o=e.match(new RegExp(this.options.openTag+"(.*?)"+this.options.closeTag,"gmi"));if(o&&o.length>0){var r,i=o[0];r=e.indexOf(this.options.openTag);try{for(var s=i.match(new RegExp(this.options.openTag,"gmi")),a=i.match(new RegExp(this.options.closeTag,"gmi")),p=s.length-a.length;p>0;){var l=r+i.length,h=e.indexOf(this.options.closeTag,r+i.length);i+=e.substr(l,h-l+this.options.closeTag.length),s=i.match(new RegExp(this.options.openTag,"gmi")),a=i.match(new RegExp(this.options.closeTag,"gmi")),p=s.length-a.length}}catch(u){return console.error("Unable to parse string:",e),t}return t+=e.substr(0,r),t+=this.parseExpression(i,n),e=e.substr(r+i.length),this.parseString(e,t,n)}return t+=e},n.prototype.parseExpression=function(e,t){e=e.substr(this.options.openTag.length,e.length-this.options.openTag.length-this.options.closeTag.length).trim(),this.log("Parse Expression"),this.log("%c"+e,this.options.debugConsoleStyle.warn);try{var n=this.options.matchers.type instanceof RegExp?this.options.matchers.type:new RegExp(this.options.matchers.type,"i"),o=e.match(n);if(!o||0===o.length)return this.parseError("No type found in expression:",option);if(o=o[0],this.log("Dertimed type for this expression is: %s",o),o&&(e=e.substr(o.length).trim()),this.options.markers.gender.indexOf(o)>=0)return this.parseExpressionGender(e,t);if(this.options.markers.number.indexOf(o)>=0)return this.parseExpressionNumber(e,t);if(this.options.markers.integer.indexOf(o)>=0)return this.parseExpressionInteger(e,t);throw console.warn("Unable to get defined type in this expression."),console.warn("%c"+e,this.options.debugConsoleStyle.warn),Error()}catch(r){throw r}},n.prototype.extractComponentsInExpression=function(e){this.log("the expression to parse for gender is",e);var t,n=this,o=this.options.matchers.variable instanceof RegExp?this.options.matchers.variable:new RegExp(this.options.matchers.variable,"i"),r=e.match(o),i={};return r&&0!==r.length?(r=r[0],e=e.substr(r?r.length:0).trim(),t=e.match(/((\w+\(\{\{).*?(\}\}\)))|((\w+\().*?(\)))/gi),t&&0!==t.length?(t.forEach(function(e){var t=e.match(o);return t&&0!==t.length?(t=t[0],void("string"==typeof t&&t.length>0&&(e=e.substr(t.length+1),e=e.substr(0,e.length-1),i[t.toLowerCase()]=e))):n.parseError("No options found in expression:",e)}),{variable:r,options:i}):n.parseError("No options found in expression:",option)):this.parseError("No variable found in expression:",option)},n.prototype.parseExpressionGender=function(e,t){this.log("Parse expression for %cGender",this.options.debugConsoleStyle.error);var n=this.extractComponentsInExpression(e),o=t.getDescendant(n.variable),r=n.options[o];return this.log(n),r?this.parseString(r):""},n.prototype.parseExpressionInteger=function(e,t){this.log("Parse expression %cInteger",this.options.debugConsoleStyle.error);var n,o,r,i=this.extractComponentsInExpression(e),s=t.getDescendant(i.variable);return s?(n=parseFloat(s),o=this.options.numbers(n,this.options.numberEnum),r=i.options[o]||i.options.other,this.log(i),r?n+this.parseString(r):""):this.parseError("The variable: "+s+" can't be found.")},n.prototype.parseExpressionNumber=function(e,t){this.log("Parse expression %cNumber",this.options.debugConsoleStyle.error);var n,o,r,i=this.extractComponentsInExpression(e),s=t.getDescendant(i.variable);return s?(n=parseFloat(s),o=this.options.numbers(n,this.options.numberEnum),r=i.options[o]||i.options.other,this.log(i),r?this.options.numberToString(n)+this.parseString(r):""):this.parseError("The variable: "+s+" can't be found.")},"undefined"!=typeof module&&module.exports)n.prototype.loadLocale=function(e){return require(e)},o=new n,module.exports=o[o.options.invoker].bind(o);else if("function"==typeof define&&define.amd)n.prototype.loadLocale=e,o=new n,define(function(){return o[o.options.invoker].bind(o)});else try{n.prototype.loadLocale=e,o=new n,r[o.options.invoker]=o[o.options.invoker].bind(o)}catch(i){}}();